<!DOCTYPE html>
<html>
<head>
        <title>Loudoun County Rural Water Supply</title>
        <meta charset="utf-8" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
<!--[if lte IE 8]>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
<![endif]-->

<script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
</head>
<body>
        <div id="map" style="width: 1200px; height: 850px"></div>

        <script src="sources.geojson"></script>
        <script>
                var map = L.map('map').setView([ 39.12, -77.65], 11);
                
                var baseLayer = L.tileLayer('https://{s}.tiles.mapbox.com/v3/jasondalton.map-7z4qef6u/{z}/{x}/{y}.png', {
                //var baseLayer = L.tileLayer('http://{s}.tile.cloudmade.com/{key}/22677/256/{z}/{x}/{y}.png', {
                        attribution: 'Azimuth1',
                        maxZoom: 22
                });

                baseLayer.addTo(map);

                var baseballIcon = L.icon({
                        iconUrl: 'baseball-marker.png',
                        iconSize: [32, 37],
                        iconAnchor: [16, 37],
                        popupAnchor: [0, -28]
                });

                L.geoJson([sources], {

                        style: function (feature) {
                                return feature.properties && feature.properties.style;
                        },

                        onEachRecord: function (layer,feature) {
                                var str = "";
                                $.each(feature, function(key, val){
                                        str += '<tr><td>'+key+'</td><td id="'+key+'">'+val+'</td><tr>';
                                  });
                                  layer.bindPopup(str);
                        },


                        pointToLayer: function (feature, latlng) {
                                return L.circleMarker(latlng, {
                                        radius: 8,
                                        fillColor: "#ff7800",
                                        color: "#000",
                                        weight: 1,
                                        opacity: 1,
                                        fillOpacity: 0.8
                                });
                        }
                }).addTo(map);

        </script>
</body>
</html>


